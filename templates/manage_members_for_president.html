<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">


  <title>President</title>

  <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}" />
</head>

<body>


  <div class="d-flex p-0 container-fluid">
    <div class="d-none d-lg-block side bg">
      <nav class="navbar1 p-0 h-100">
        <div class="p-0 h-100 side d-flex flex-column">
          <div class="p-0 pt-lg-5 p-lg-4 pt-sm-3 d-flex align-self-center">
            <a href="{{url_for('dashboard')}}">
              <div class="p-lg-3 align-self-center">
                <img src="/static/images/icon.png" class="icon-img1" />
              </div>
              <div class="p-0  pb-2 light">
                <h4 class="d-none d-lg-block">VIT - CIMP</h4>
              </div>
            </a>
          </div>
          <hr class="d-lg-block my-2 light">
          <div class=""></div>


          <div class="mt-auto pb-0">
            <hr class="light" />
            <div class="p-3 p-sm-0 ps-sm-3 pb-sm-3 pt-0">
              <h6 class="ps-4 p-2 pb-0 d-none d-lg-block">ACCOUNT</h6>
              <a href="{{url_for('login')}}">
                <div class="ps-sm-3 ps-4 p-2 row inactive logout">
                  <div class="col-1">
                    <i class="fa-solid icon fa-right-from-bracket"></i>
                  </div>
                  <div class="ps-4 col-6 light grey d-none d-lg-block">Logout</div>
                </div>
              </a>
            </div>

            <div class="p-3 pb-2 my-0 footer">
              <a href="">
                <div class="ps-4 p-2 ps-sm-3  row d-flex align-items-center">
                  <div class="col-1"><i class="fa-solid icon fa-user"></i></div>
                  <div class="ps-4 col-6 d-none d-lg-block light">
                    <div class="">{{user.id}}</div>
                    <div class="pt-1">
                      <h6>{{user.email}}</h6>
                    </div>
                  </div>
                </div>
              </a>
            </div>
          </div>
        </div>
      </nav>
    </div>
    <div class="col-8 flex-grow-1 ps-4 light-bg main">
      <div data-bs-spy="scroll" data-bs-target="#navbar-example3" data-bs-smooth-scroll="true"
        class="scrollspy-example-2" tabindex="0">
        <div>
          <nav class="d-lg-none ps-3 d-block navbar fixed-top nav-bg2">
            <div class="d-flex   p-sm-2 justify-content-start">
              <div class="d-lg-none navbar-toggler" type="button" data-bs-toggle="offcanvas"
                data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
                <span class=""><i class="fa-solid fa-bars icon light pt-1"></i></span>
              </div>
              <div class="d-lg-none offcanvas bg light offcanvas-start" tabindex="-1" id="offcanvasNavbar"
                aria-labelledby="offcanvasNavbarLabel">
                <div class="offcanvas-header" data-bs-theme="dark">
                  <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <div class="p-0 d-flex align-self-center">
                  <a href="{{url_for('dashboard')}}">
                    <div class="p-3 align-self-center">
                      <img src="/static/images/icon.png" class="icon-img2" />
                    </div>
                    <div class="p-0 pt-2 pb-2 light">
                      <h4>VIT - CIMP</h4>
                    </div>
                  </a>
                </div>
                <div class="p-0">
                  <hr />
                </div>
                <div class="ps-3 offcanvas-body d-flex flex-column">

                </div>
                <hr />
                <div class="flex-end p-0">
                  <div class="p-3 pt-0">
                    <h6 class="ps-4 p-2 pb-0">ACCOUNT</h6>
                    <a href="{{url_for('login')}}">
                      <div class="ps-4 p-2 row inactive">
                        <div class="col-1">
                          <i class="fa-solid icon fa-right-from-bracket"></i>
                        </div>
                        <div class="ps-4 col-6 light grey">Logout</div>
                      </div>
                    </a>
                  </div>

                  <div class="p-3 pb-1 footer">
                    <a href="">
                      <div class="ps-4 p-2 row d-flex align-items-center">
                        <div class="col-1"><i class="fa-solid icon fa-user"></i></div>
                        <div class="ps-4 col-6 light">
                          <div class="">{{user.id}}</div>
                          <div class="pt-1">
                            <h6>{{user.email}}</h6>
                          </div>
                        </div>
                      </div>
                    </a>
                  </div>
                </div>
              </div>
              <a class="navbar-brand d-lg-none light" href="#">VIT - CIMP</a>
            </div>
          </nav>
        </div>
        <div>
          <h1 class="dark pt-lg-2 ps-4 pb-sm-1 my-4 pb-3">{% block title2 %}{% endblock %}</h1>
        </div>
        <div class="p-2  ">{% block search %}{% endblock %}</div>
        <div class="container text-center ps-0 pe-4 ">
          <div class="white-bg container pb-5 page2">
            <h3 class="pb-3 pt-5">Manage Members for <strong>{{ club.club_name }}</strong></h3>


            <form method="POST" action="{{ url_for('add_member', club_id=club.club_id) }}" class="form pt-3 pb-5">
              <div class=" row align-items-center ps-5">
                <label for="clubSelect" class="col-md-4 col-form-label fw-bold">Add members</label>
                <div class="col-md-6">
                  <select name="student_id" class="form-select" required>
                    <option value="" disabled selected>Select Student to Add</option>
                    {% for s in non_members %}
                    <option value="{{ s.student_id }}">{{ s.name }} ({{ s.student_id }})</option>
                    {% endfor %}
                  </select>
                </div>
                <div class=" col-md-2">
                  <button type="submit" class="btn btn-success w-100">Add</button>
                </div>
              </div>
            </form>
            <!-- Member List -->
            <table class="table table-bordered">
              <thead>
                <tr>
                  <th>S.No</th>
                  <th>Student ID</th>
                  <th>Name</th>
                  <th class="d-none d-md-table-cell">Department</th>
                  <th class="d-none d-md-table-cell">Year</th>

                  <th>Action</th>

                </tr>
              </thead>
              <tbody>
                {% for m in members %}
                <tr>
                  <td>{{ loop.index }}</td>
                  <td>{{ m.student.student_id }}</td>
                  <td>
                    {{ m.student.name }}
                    <button class="btn pt-2 btn-sm btn-outline-primary d-md-none ms-2" type="button"
                      data-bs-toggle="collapse" data-bs-target="#collapse{{ loop.index }}">
                      <i class="fa-solid fa-chevron-down"></i>
                    </button>
                  </td>

                  <!-- Hide these columns on small screens -->
                  <td class="d-none d-md-table-cell">{{ m.student.department }}</td>
                  <td class="d-none d-md-table-cell">{{ m.student.year }}</td>

                  <td class="d-md-table-cell">
                    <form action="{{ url_for('remove_member', club_id=club.club_id, student_id=m.student.student_id) }}"
                      method="POST" onsubmit="return confirm('Remove this member?');" style="width:7rem">
                      <button class="btn btn-danger btn-sm">Remove</button>
                    </form>
                  </td>
                </tr>

                <!-- Collapsible details row (only shown on small screens) -->
                <tr class="collapse d-md-none" id="collapse{{ loop.index }}">
                  <td colspan="6">
                    <ul class="list-group list-group-flush">
                      <li class="list-group-item"><strong>Department:</strong> {{ m.student.department }}</li>
                      <li class="list-group-item"><strong>Year:</strong> {{ m.student.year }}</li>

                    </ul>
                  </td>
                </tr>
                {% endfor %}
              </tbody>

            </table>
            <div class="mx-2 pt-4">
              <a class="btn btn-primary" href="{{ url_for('dashboard') }}" role="button">Back</a>
            </div>
          </div>
        

        </div>
      </div>
    </div>
  </div>
  



  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
    crossorigin="anonymous"></script>
</body>

</html>